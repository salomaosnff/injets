"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }var F=Object.defineProperty;var I=(o,e,t)=>e in o?F(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var u=(o,e,t)=>(I(o,typeof e!="symbol"?e+"":e,t),t),D=(o,e,t)=>{if(!e.has(o))throw TypeError("Cannot "+t)};var n=(o,e,t)=>(D(o,e,"read from private field"),t?t.call(o):e.get(o)),s=(o,e,t)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,t)},f=(o,e,t,r)=>(D(o,e,"write to private field"),r?r.call(o,t):e.set(o,t),t);var w=(o,e,t)=>(D(o,e,"access private method"),t);var h,P=class P{constructor(e){s(this,h,void 0);f(this,h,e)}createProxy(e){let t,r=()=>_nullishCoalesce(t, () => ((t=e(n(this,h).call(this))))),i={};for(let E of P.reflectMethods)i[E]=(G,...W)=>Reflect[E](r(),...W);return new Proxy({},i)}};h=new WeakMap,u(P,"reflectMethods",["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]);var y=P;function j(o){return new y(o)}var g=(t=>(t.SINGLETON="SINGLETON",t.TRANSIENT="TRANSIENT",t))(g||{});function k(o){return typeof o=="function"?o.name:String(o)}function M(o){return"useValue"in o}function b(o){return"useClass"in o}function C(o){return"useFactory"in o}function U(o,e){return o.mode===e}var a,x,T,d,c,p,v,L,m,N,l=class l{constructor(e={}){s(this,v);s(this,m);s(this,a,void 0);s(this,x,void 0);s(this,T,new Map);s(this,d,new Map);s(this,c,new Map);s(this,p,new Set);u(this,"isGlobal");this.isGlobal=_nullishCoalesce(e.isGlobal, () => (!1)),f(this,a,_nullishCoalesce(e.name, () => (this.constructor.name))),f(this,x,_nullishCoalesce(e.defaultExport, () => (!0)));for(let t of _nullishCoalesce(e.imports, () => ([])))this.import(t);for(let t of _nullishCoalesce(e.providers, () => ([])))this.provide(t)}resolve(e,t){if(Array.isArray(e))return e.map(i=>this.resolve(i,t));let r=e;if(typeof r>"u")throw new TypeError(`Possible circular dependency detected in ${n(this,a)} container.
Token is undefined.
Try to use "delay(() => <token>)" function to delay the resolution of the token.`);if(r instanceof y)return r.createProxy(i=>this.resolve(i));if(n(this,T).has(r))return n(this,T).get(r);if(n(this,c).has(r)){if(!t&&!n(this,p).has(r))throw new Error(`Provider "${k(r)}" is not exported from container "${n(this,a)}"`);let i=n(this,c).get(r);return w(this,v,L).call(this,i)}if(n(this,d).has(r))return n(this,d).get(r).resolve(r);try{return l.global.resolve(r)}catch (e2){}throw new Error(`Provider "${k(r)}" not found in container "${n(this,a)}"`)}provide(e){let t=_nullishCoalesce(e.token, () => (e.useClass));if((b(e)||C(e))&&(_nullishCoalesce(e.mode, () => ((e.mode="SINGLETON")))),!t)throw new Error("Provider must have a token or a useClass property");n(this,c).set(t,e),(_nullishCoalesce(e.export, () => (n(this,x))))&&this.export(t),this.isGlobal&&n(l.global,d).set(t,this)}import(e){for(let t of n(e,p))n(this,d).set(t,e)}export(e){if(n(this,c).has(e)){n(this,p).add(e);return}throw new Error(`Cannot export "${k(e)}" from container "${n(this,a)}" because it is not registered`)}};a=new WeakMap,x=new WeakMap,T=new WeakMap,d=new WeakMap,c=new WeakMap,p=new WeakMap,v=new WeakSet,L=function(e){let t=_nullishCoalesce(e.token, () => (e.useClass)),r=w(this,m,N).call(this,e);return U(e,"SINGLETON")&&n(this,T).set(t,r),r},m=new WeakSet,N=function(e){if(b(e)){let t=this.resolve(_nullishCoalesce(e.inject, () => ([])),!0);return new e.useClass(...t)}if(C(e)){let t=this.resolve(_nullishCoalesce(e.inject, () => ([])),!0);return e.useFactory(...t)}if(M(e))return e.useValue;throw new Error("Providers must be a class, factory, or value")},u(l,"global",new l({name:"global"}));var V=l;exports.Container = V; exports.Delayed = y; exports.ProviderMode = g; exports.delayed = j; exports.isClassProvider = b; exports.isFactoryProvider = C; exports.isValueProvider = M; exports.providerModeIs = U; exports.tokenName = k;
//# sourceMappingURL=index.js.map